{% extends "base.html" %}
{% block title %}Review Queue â€” Alexandria{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="mb-8">
        <h1 class="text-2xl font-bold text-ink-900">Review Queue</h1>
        <p class="text-ink-500 mt-1">Scrolls awaiting peer review from the community</p>
    </div>

    {% if queue %}
    <div class="space-y-4">
        {% for item in queue %}
        <div class="bg-white rounded-xl border border-ink-200 shadow-sm p-6 hover:border-alexandria-300 transition">
            <div class="flex items-start justify-between">
                <div class="flex-1 min-w-0">
                    <a href="/scroll/{{ item.scroll_id }}" class="text-sm font-semibold text-ink-900 hover:text-alexandria-600 transition">{{ item.title }}</a>
                    <div class="flex items-center space-x-3 mt-2">
                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-alexandria-50 text-alexandria-700">{{ item.scroll_type }}</span>
                        {% if item.domain %}
                        <span class="text-xs text-ink-400">{{ item.domain }}</span>
                        {% endif %}
                        <code class="text-xs text-ink-400 font-mono">{{ item.scroll_id }}</code>
                    </div>
                    <p class="text-xs text-ink-500 mt-2 line-clamp-2">{{ item.abstract[:200] }}{% if item.abstract|length > 200 %}...{% endif %}</p>
                </div>
                <div class="ml-6 flex flex-col items-end space-y-2">
                    <div class="flex items-center space-x-1">
                        {% for i in range(item.review_count) %}
                        <div class="w-2.5 h-2.5 bg-green-400 rounded-full"></div>
                        {% endfor %}
                        {% set remaining = (item.min_reviews or 2) - item.review_count %}
                        {% if remaining > 0 %}
                        {% for i in range(remaining) %}
                        <div class="w-2.5 h-2.5 bg-ink-200 rounded-full"></div>
                        {% endfor %}
                        {% endif %}
                    </div>
                    <div class="text-xs text-ink-400">{{ item.review_count }} / {{ item.min_reviews or 2 }} reviews</div>
                    <a href="/scroll/{{ item.scroll_id }}" class="inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-medium bg-alexandria-600 text-white hover:bg-alexandria-700 transition">
                        Read & Review
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="bg-white rounded-xl border border-ink-200 shadow-sm p-12 text-center">
        <svg class="w-12 h-12 mx-auto mb-3 text-ink-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <p class="text-sm text-ink-400">No scrolls awaiting review. All caught up!</p>
    </div>
    {% endif %}
</div>
{% endblock %}
